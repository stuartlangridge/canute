#!/usr/bin/env python
import sys, json
from subprocess import Popen, PIPE, STDOUT

EMOJI = {u'wine_glass': u'1f377', u'clock830': u'1f563', u'rabbit': u'1f430', u'arrow_right': u'27a1', u'tram': u'1f68a', u'thought_balloon': u'1f4ad', u'alien': u'1f47d', u'crocodile': u'1f40a', u'flag_white': u'1f3f3', u'helmet_with_cross': u'26d1', u'man_in_tuxedo': u'1f935', u'handball': u'1f93e', u'white_square_button': u'1f533', u'golfer': u'1f3cc', u'curly_loop': u'27b0', u'maple_leaf': u'1f341', u'no_bicycles': u'1f6b3', u'man_with_gua_pi_mao': u'1f472', u'e-mail': u'1f4e7', u'tv': u'1f4fa', u'waxing_gibbous_moon': u'1f314', u'rotating_light': u'1f6a8', u'mosque': u'1f54c', u'file_cabinet': u'1f5c4', u'part_alternation_mark': u'303d', u'bike': u'1f6b2', u'mountain_cableway': u'1f6a0', u'recycle': u'267b', u'smile': u'1f604', u'fencer': u'1f93a', u'large_blue_circle': u'1f535', u'persevere': u'1f623', u'open_file_folder': u'1f4c2', u'fax': u'1f4e0', u'woman': u'1f469', u'homes': u'1f3d8', u'eight_pointed_black_star': u'2734', u'department_store': u'1f3ec', u'trident': u'1f531', u'oncoming_automobile': u'1f698', u'wave': u'1f44b', u'u7a7a': u'1f233', u'spoon': u'1f944', u'white_sun_small_cloud': u'1f324', u'card_box': u'1f5c3', u'ticket': u'1f3ab', u'ramen': u'1f35c', u'twisted_rightwards_arrows': u'1f500', u'cool': u'1f192', u'tickets': u'1f39f', u'school': u'1f3eb', u'high_brightness': u'1f506', u'house_abandoned': u'1f3da', u'heavy_minus_sign': u'2796', u'notes': u'1f3b6', u'white_flower': u'1f4ae', u'registered': u'00ae', u'gun': u'1f52b', u'video_game': u'1f3ae', u'saxophone': u'1f3b7', u'lying_face': u'1f925', u'crayon': u'1f58d', u'notebook_with_decorative_cover': u'1f4d4', u'triumph': u'1f624', u'tea': u'1f375', u'scorpius': u'264f', u'bacon': u'1f953', u'suspension_railway': u'1f69f', u'arrow_left': u'2b05', u'small_orange_diamond': u'1f538', u'trackball': u'1f5b2', u'levitate': u'1f574', u'cactus': u'1f335', u'spaghetti': u'1f35d', u'monorail': u'1f69d', u'ribbon': u'1f380', u'couplekiss': u'1f48f', u'mega': u'1f4e3', u'abc': u'1f524', u'clock': u'1f570', u'crescent_moon': u'1f319', u'cooking': u'1f373', u'love_letter': u'1f48c', u'bikini': u'1f459', u'file_folder': u'1f4c1', u'milk': u'1f95b', u'clipboard': u'1f4cb', u'baby_bottle': u'1f37c', u'new': u'1f195', u'bird': u'1f426', u'1234': u'1f522', u'smiling_imp': u'1f608', u'railway_car': u'1f683', u'no_smoking': u'1f6ad', u'pancakes': u'1f95e', u'herb': u'1f33f', u'pouting_cat': u'1f63e', u'vertical_traffic_light': u'1f6a6', u'punch': u'1f44a', u'second_place': u'1f948', u'blue_heart': u'1f499', u'house_with_garden': u'1f3e1', u'baseball': u'26be', u'busstop': u'1f68f', u'new_moon': u'1f311', u'mobile_phone_off': u'1f4f4', u'100': u'1f4af', u'thumbsup': u'1f44d', u'bust_in_silhouette': u'1f464', u'bouquet': u'1f490', u'boy': u'1f466', u'arrow_lower_left': u'2199', u'no_entry': u'26d4', u'see_no_evil': u'1f648', u'metro': u'1f687', u'leaves': u'1f343', u'heavy_plus_sign': u'2795', u'roller_coaster': u'1f3a2', u'bow': u'1f647', u'dragon_face': u'1f432', u'light_rail': u'1f688', u'track_next': u'23ed', u'popcorn': u'1f37f', u'cookie': u'1f36a', u'cloud_snow': u'1f328', u'massage': u'1f486', u'stew': u'1f372', u'children_crossing': u'1f6b8', u'chains': u'26d3', u'santa': u'1f385', u'family': u'1f46a', u'heart': u'2764', u'sleeping_accommodation': u'1f6cc', u'arrow_up_down': u'2195', u'mount_fuji': u'1f5fb', u'keycap_ten': u'1f51f', u'mountain_snow': u'1f3d4', u'outbox_tray': u'1f4e4', u'duck': u'1f986', u'clock330': u'1f55e', u'dango': u'1f361', u'fleur-de-lis': u'269c', u'honey_pot': u'1f36f', u'eye': u'1f441', u'red_car': u'1f697', u'ballot_box': u'1f5f3', u'baby': u'1f476', u'sake': u'1f376', u'confounded': u'1f616', u'hospital': u'1f3e5', u'clock5': u'1f554', u'poodle': u'1f429', u'red_circle': u'1f534', u'lollipop': u'1f36d', u'tm': u'2122', u'iphone': u'1f4f1', u'sweat_smile': u'1f605', u'aries': u'2648', u'white_sun_rain_cloud': u'1f326', u'ear_of_rice': u'1f33e', u'squid': u'1f991', u'video_camera': u'1f4f9', u'mouse2': u'1f401', u'chestnut': u'1f330', u'pencil': u'1f4dd', u'guardsman': u'1f482', u'door': u'1f6aa', u'baby_symbol': u'1f6bc', u'thunder_cloud_rain': u'26c8', u'steam_locomotive': u'1f682', u'black_large_square': u'2b1b', u'envelope': u'2709', u'money_with_wings': u'1f4b8', u'melon': u'1f348', u'train': u'1f68b', u'beers': u'1f37b', u'water_buffalo': u'1f403', u'heart_exclamation': u'2763', u'first_quarter_moon_with_face': u'1f31b', u'mailbox_closed': u'1f4ea', u'hole': u'1f573', u'rooster': u'1f413', u'pouch': u'1f45d', u'notepad_spiral': u'1f5d2', u'jack_o_lantern': u'1f383', u'izakaya_lantern': u'1f3ee', u'salad': u'1f957', u'earth_africa': u'1f30d', u'package': u'1f4e6', u'cat': u'1f431', u'carrot': u'1f955', u'chocolate_bar': u'1f36b', u'v': u'270c', u'running_shirt_with_sash': u'1f3bd', u'ferry': u'26f4', u'raised_hands': u'1f64c', u'put_litter_in_its_place': u'1f6ae', u'game_die': u'1f3b2', u'abcd': u'1f521', u'spy': u'1f575', u'shark': u'1f988', u'green_heart': u'1f49a', u'hamburger': u'1f354', u'pushpin': u'1f4cc', u'lock': u'1f512', u'dividers': u'1f5c2', u'dolphin': u'1f42c', u'confused': u'1f615', u'accept': u'1f251', u'night_with_stars': u'1f303', u'cruise_ship': u'1f6f3', u'pig2': u'1f416', u'alarm_clock': u'23f0', u'timer': u'23f2', u'white_medium_small_square': u'25fd', u'basketball_player': u'26f9', u'station': u'1f689', u'airplane': u'2708', u'clock230': u'1f55d', u'dress': u'1f457', u'kissing_closed_eyes': u'1f61a', u'earth_americas': u'1f30e', u'bullettrain_front': u'1f685', u'end': u'1f51a', u'goal': u'1f945', u'sailboat': u'26f5', u'speedboat': u'1f6a4', u'ledger': u'1f4d2', u'tomato': u'1f345', u'small_blue_diamond': u'1f539', u'leftwards_arrow_with_hook': u'21a9', u'rewind': u'23ea', u'wolf': u'1f43a', u'earth_asia': u'1f30f', u'beach': u'1f3d6', u'goat': u'1f410', u'pizza': u'1f355', u'heavy_check_mark': u'2714', u'map': u'1f5fa', u'briefcase': u'1f4bc', u'disappointed_relieved': u'1f625', u'sunny': u'2600', u'star_of_david': u'2721', u'head_bandage': u'1f915', u'motorway': u'1f6e3', u'sun_with_face': u'1f31e', u'birthday': u'1f382', u'fast_forward': u'23e9', u'heartpulse': u'1f497', u'mag': u'1f50d', u'expressionless': u'1f611', u'sparkler': u'1f387', u'sparkles': u'2728', u'dove': u'1f54a', u'repeat': u'1f501', u'man': u'1f468', u'a': u'1f170', u'8ball': u'1f3b1', u'headphones': u'1f3a7', u'cl': u'1f191', u'croissant': u'1f950', u'wheelchair': u'267f', u'french_bread': u'1f956', u'robot': u'1f916', u'volleyball': u'1f3d0', u'snowman2': u'2603', u'tulip': u'1f337', u'speaking_head': u'1f5e3', u'truck': u'1f69a', u'wrench': u'1f527', u'ambulance': u'1f691', u'sa': u'1f202', u'point_up_2': u'1f446', u'egg': u'1f95a', u'small_red_triangle': u'1f53a', u'ok_hand': u'1f44c', u'shield': u'1f6e1', u'office': u'1f3e2', u'mute': u'1f507', u'clapper': u'1f3ac', u'haircut': u'1f487', u'soon': u'1f51c', u'cross': u'271d', u'symbols': u'1f523', u'black_square_button': u'1f532', u'motorcycle': u'1f3cd', u'keyboard': u'2328', u'japan': u'1f5fe', u'post_office': u'1f3e3', u'owl': u'1f989', u'last_quarter_moon_with_face': u'1f31c', u'ophiuchus': u'26ce', u'rosette': u'1f3f5', u'pray': u'1f64f', u'avocado': u'1f951', u'dark_sunglasses': u'1f576', u'dizzy_face': u'1f635', u'imp': u'1f47f', u'currency_exchange': u'1f4b1', u'regional_indicator_a': u'1f1e6', u'paperclip': u'1f4ce', u'moneybag': u'1f4b0', u'mailbox_with_no_mail': u'1f4ed', u'peanuts': u'1f95c', u'soccer': u'26bd', u'selfie': u'1f933', u'dolls': u'1f38e', u'coffee': u'2615', u'full_moon_with_face': u'1f31d', u'neutral_face': u'1f610', u'elephant': u'1f418', u'open_mouth': u'1f62e', u'bar_chart': u'1f4ca', u'european_castle': u'1f3f0', u'page_with_curl': u'1f4c3', u'monkey_face': u'1f435', u'snake': u'1f40d', u'kiss': u'1f48b', u'blue_car': u'1f699', u'confetti_ball': u'1f38a', u'zipper_mouth': u'1f910', u'bank': u'1f3e6', u'bread': u'1f35e', u'frame_photo': u'1f5bc', u'cucumber': u'1f952', u'rice_ball': u'1f359', u'oncoming_police_car': u'1f694', u'capricorn': u'2651', u'trolleybus': u'1f68e', u'tokyo_tower': u'1f5fc', u'weary': u'1f629', u'clock930': u'1f564', u'fishing_pole_and_fish': u'1f3a3', u'repeat_one': u'1f502', u'bowling': u'1f3b3', u'thumbsdown': u'1f44e', u'older_woman': u'1f475', u'capital_abcd': u'1f520', u'turtle': u'1f422', u'doughnut': u'1f369', u'telescope': u'1f52d', u'beginner': u'1f530', u'pause_button': u'23f8', u'postal_horn': u'1f4ef', u'house': u'1f3e0', u'fish': u'1f41f', u'construction_worker': u'1f477', u'spider': u'1f577', u'u7121': u'1f21a', u'bride_with_veil': u'1f470', u'camera_with_flash': u'1f4f8', u'oil': u'1f6e2', u'lifter': u'1f3cb', u'juggling': u'1f939', u'sweet_potato': u'1f360', u'beetle': u'1f41e', u'lock_with_ink_pen': u'1f50f', u'girl': u'1f467', u'calling': u'1f4f2', u'sunrise': u'1f305', u'exclamation': u'2757', u'no_good': u'1f645', u'bridge_at_night': u'1f309', u'lipstick': u'1f484', u'smirk': u'1f60f', u'fish_cake': u'1f365', u'factory': u'1f3ed', u'baggage_claim': u'1f6c4', u'cherry_blossom': u'1f338', u'sparkle': u'2747', u'fountain': u'26f2', u'mouse_three_button': u'1f5b1', u'construction_site': u'1f3d7', u'cyclone': u'1f300', u'blue_book': u'1f4d8', u'reminder_ribbon': u'1f397', u'eagle': u'1f985', u'flower_playing_cards': u'1f3b4', u'umbrella': u'2614', u'octopus': u'1f419', u'track_previous': u'23ee', u'hatching_chick': u'1f423', u'free': u'1f193', u'traffic_light': u'1f6a5', u'grimacing': u'1f62c', u'bullettrain_side': u'1f684', u'poultry_leg': u'1f357', u'grapes': u'1f347', u'smirk_cat': u'1f63c', u'customs': u'1f6c3', u'princess': u'1f478', u'microphone': u'1f3a4', u'high_heel': u'1f460', u'black_medium_small_square': u'25fe', u'green_book': u'1f4d7', u'atm': u'1f3e7', u'no_mobile_phones': u'1f4f5', u'fork_and_knife': u'1f374', u'mailbox': u'1f4eb', u'stop_button': u'23f9', u'blossom': u'1f33c', u'mrs_claus': u'1f936', u'notebook': u'1f4d3', u'yum': u'1f60b', u'gift_heart': u'1f49d', u'heartbeat': u'1f493', u'blush': u'1f60a', u'cheese': u'1f9c0', u'drooling_face': u'1f924', u'revolving_hearts': u'1f49e', u'taco': u'1f32e', u'interrobang': u'2049', u'fire_engine': u'1f692', u'regional_indicator_m': u'1f1f2', u'feet': u'1f43e', u'date': u'1f4c5', u'inbox_tray': u'1f4e5', u'spider_web': u'1f578', u'cow2': u'1f404', u'helicopter': u'1f681', u'scissors': u'2702', u'ring': u'1f48d', u'swimmer': u'1f3ca', u'zap': u'26a1', u'sheep': u'1f411', u'right_facing_fist': u'1f91c', u'horse': u'1f434', u'basketball': u'1f3c0', u'monkey': u'1f412', u'bookmark': u'1f516', u'hammer_pick': u'2692', u'top': u'1f51d', u'arrow_upper_right': u'2197', u'pregnant_woman': u'1f930', u'clock630': u'1f561', u'crossed_swords': u'2694', u'frowning2': u'2639', u'railway_track': u'1f6e4', u'banana': u'1f34c', u'kiwi': u'1f95d', u'nail_care': u'1f485', u'eyes': u'1f440', u'shell': u'1f41a', u'gear': u'2699', u'relieved': u'1f60c', u'bento': u'1f371', u'hotel': u'1f3e8', u'park': u'1f3de', u'crossed_flags': u'1f38c', u'lion_face': u'1f981', u'speech_left': u'1f5e8', u'clock730': u'1f562', u'nut_and_bolt': u'1f529', u'aerial_tramway': u'1f6a1', u'third_place': u'1f949', u'sweat_drops': u'1f4a6', u'panda_face': u'1f43c', u'umbrella2': u'2602', u'middle_finger': u'1f595', u'minibus': u'1f690', u'b': u'1f171', u'unamused': u'1f612', u'race_car': u'1f3ce', u'evergreen_tree': u'1f332', u'biohazard': u'2623', u'white_sun_cloud': u'1f325', u'bed': u'1f6cf', u'bee': u'1f41d', u'shower': u'1f6bf', u'musical_score': u'1f3bc', u'bellhop': u'1f6ce', u'hourglass_flowing_sand': u'23f3', u'clock11': u'1f55a', u'round_pushpin': u'1f4cd', u'tophat': u'1f3a9', u'clock1230': u'1f567', u'dog2': u'1f415', u'grinning': u'1f600', u'tractor': u'1f69c', u'u6709': u'1f236', u'u6708': u'1f237', u'crying_cat_face': u'1f63f', u'loud_sound': u'1f50a', u'kaaba': u'1f54b', u'runner': u'1f3c3', u'chipmunk': u'1f43f', u'ram': u'1f40f', u'writing_hand': u'270d', u'chart_with_upwards_trend': u'1f4c8', u'dash': u'1f4a8', u'rat': u'1f400', u'information_desk_person': u'1f481', u'rice_scene': u'1f391', u'mailbox_with_mail': u'1f4ec', u'dragon': u'1f409', u'milky_way': u'1f30c', u'pencil2': u'270f', u'mountain': u'26f0', u'call_me': u'1f919', u'koala': u'1f428', u'regional_indicator_n': u'1f1f3', u'necktie': u'1f454', u'wink': u'1f609', u'white_small_square': u'25ab', u'kissing_cat': u'1f63d', u'skull': u'1f480', u'thermometer': u'1f321', u'u55b6': u'1f23a', u'globe_with_meridians': u'1f310', u'snowflake': u'2744', u'paintbrush': u'1f58c', u'butterfly': u'1f98b', u'hibiscus': u'1f33a', u'crystal_ball': u'1f52e', u'printer': u'1f5a8', u'palm_tree': u'1f334', u'koko': u'1f201', u'small_red_triangle_down': u'1f53b', u'chart': u'1f4b9', u'credit_card': u'1f4b3', u'checkered_flag': u'1f3c1', u'beach_umbrella': u'26f1', u'handbag': u'1f45c', u'pensive': u'1f614', u'pager': u'1f4df', u'busts_in_silhouette': u'1f465', u'ballot_box_with_check': u'2611', u'point_right': u'1f449', u'radioactive': u'2622', u'motor_scooter': u'1f6f5', u'eject': u'23cf', u'fried_shrimp': u'1f364', u'up': u'1f199', u'mans_shoe': u'1f45e', u'raised_hand': u'270b', u'metal': u'1f918', u'dog': u'1f436', u'dollar': u'1f4b5', u'new_moon_with_face': u'1f31a', u'shinto_shrine': u'26e9', u'ideograph_advantage': u'1f250', u'pineapple': u'1f34d', u'fingers_crossed': u'1f91e', u'black_circle': u'26ab', u'scream': u'1f631', u'taxi': u'1f695', u'walking': u'1f6b6', u'purple_heart': u'1f49c', u'bomb': u'1f4a3', u'rolling_eyes': u'1f644', u'minidisc': u'1f4bd', u'atom': u'269b', u'space_invader': u'1f47e', u'hugging': u'1f917', u'horse_racing': u'1f3c7', u'left_facing_fist': u'1f91b', u'radio': u'1f4fb', u'point_down': u'1f447', u'chicken': u'1f414', u'copyright': u'00a9', u'arrow_lower_right': u'2198', u'city_sunset': u'1f307', u'scooter': u'1f6f4', u'scorpion': u'1f982', u'waning_crescent_moon': u'1f318', u'arrow_backward': u'25c0', u'cupid': u'1f498', u'mens': u'1f6b9', u'virgo': u'264d', u'shopping_bags': u'1f6cd', u'hockey': u'1f3d2', u'rice': u'1f35a', u'racehorse': u'1f40e', u'sunglasses': u'1f60e', u'sagittarius': u'2650', u'electric_plug': u'1f50c', u'circus_tent': u'1f3aa', u'diamonds': u'2666', u'watch': u'231a', u'arrow_up': u'2b06', u'bear': u'1f43b', u'frowning': u'1f626', u'incoming_envelope': u'1f4e8', u'watermelon': u'1f349', u'wedding': u'1f492', u'yellow_heart': u'1f49b', u'gem': u'1f48e', u'bat': u'1f987', u'hand_splayed': u'1f590', u'negative_squared_cross_mark': u'274e', u'smoking': u'1f6ac', u'cry': u'1f622', u'motorboat': u'1f6e5', u'worried': u'1f61f', u'microscope': u'1f52c', u'older_man': u'1f474', u'whale2': u'1f40b', u'x': u'274c', u'om_symbol': u'1f549', u'japanese_ogre': u'1f479', u'fuelpump': u'26fd', u'oncoming_taxi': u'1f696', u'man_with_turban': u'1f473', u'arrow_up_small': u'1f53c', u'art': u'1f3a8', u'cocktail': u'1f378', u'hear_no_evil': u'1f649', u'star_and_crescent': u'262a', u'convenience_store': u'1f3ea', u'seat': u'1f4ba', u'cloud_rain': u'1f327', u'computer': u'1f4bb', u'arrow_down': u'2b07', u'vhs': u'1f4fc', u'parking': u'1f17f', u'pisces': u'2653', u'calendar': u'1f4c6', u'hammer': u'1f528', u'hourglass': u'231b', u'loudspeaker': u'1f4e2', u'scream_cat': u'1f640', u'black_joker': u'1f0cf', u'ferris_wheel': u'1f3a1', u'bookmark_tabs': u'1f4d1', u'camping': u'1f3d5', u'bicyclist': u'1f6b4', u'no_mouth': u'1f636', u'postbox': u'1f4ee', u'large_blue_diamond': u'1f537', u'cat2': u'1f408', u'label': u'1f3f7', u'icecream': u'1f366', u'sweat': u'1f613', u'amphora': u'1f3fa', u'tangerine': u'1f34a', u'bulb': u'1f4a1', u'champagne': u'1f37e', u'no_entry_sign': u'1f6ab', u'shaved_ice': u'1f367', u'tent': u'26fa', u'microphone2': u'1f399', u'martial_arts_uniform': u'1f94b', u'raising_hand': u'1f64b', u'wc': u'1f6be', u'person_with_blond_hair': u'1f471', u'joy': u'1f602', u'hot_pepper': u'1f336', u'aquarius': u'2652', u'couple_with_heart': u'1f491', u'guitar': u'1f3b8', u'cake': u'1f370', u'ok_woman': u'1f646', u'key': u'1f511', u'slight_frown': u'1f641', u'do_not_litter': u'1f6af', u'surfer': u'1f3c4', u'statue_of_liberty': u'1f5fd', u'cop': u'1f46e', u'six_pointed_star': u'1f52f', u'drum': u'1f941', u'tropical_drink': u'1f379', u'cow': u'1f42e', u'no_pedestrians': u'1f6b7', u'coffin': u'26b0', u'moyai': u'1f5ff', u'restroom': u'1f6bb', u'white_large_square': u'2b1c', u'pen_fountain': u'1f58b', u'eggplant': u'1f346', u'comet': u'2604', u'low_brightness': u'1f505', u'regional_indicator_s': u'1f1f8', u'passport_control': u'1f6c2', u'four_leaf_clover': u'1f340', u'wrestlers': u'1f93c', u'pig_nose': u'1f43d', u'cancer': u'264b', u'ice_skate': u'26f8', u'battery': u'1f50b', u'thermometer_face': u'1f912', u'wastebasket': u'1f5d1', u'jeans': u'1f456', u'leo': u'264c', u'rofl': u'1f923', u'hotsprings': u'2668', u'page_facing_up': u'1f4c4', u'church': u'26ea', u'boar': u'1f417', u'trumpet': u'1f3ba', u'regional_indicator_b': u'1f1e7', u'turkey': u'1f983', u'angel': u'1f47c', u'rugby_football': u'1f3c9', u'underage': u'1f51e', u'oden': u'1f362', u'beer': u'1f37a', u'stadium': u'1f3df', u'clock430': u'1f55f', u'stuck_out_tongue_closed_eyes': u'1f61d', u'airplane_departure': u'1f6eb', u'heavy_division_sign': u'2797', u'fork_knife_plate': u'1f37d', u'flag_black': u'1f3f4', u'musical_note': u'1f3b5', u'u6307': u'1f22f', u'performing_arts': u'1f3ad', u'mushroom': u'1f344', u'record_button': u'23fa', u'fire': u'1f525', u'two_hearts': u'1f495', u'tiger': u'1f42f', u'cold_sweat': u'1f630', u'vulcan': u'1f596', u'foggy': u'1f301', u'wheel_of_dharma': u'2638', u'golf': u'26f3', u'heart_eyes': u'1f60d', u'sound': u'1f509', u'ant': u'1f41c', u'blowfish': u'1f421', u'speech_balloon': u'1f4ac', u'wind_chime': u'1f390', u'nauseated_face': u'1f922', u'seedling': u'1f331', u'fearful': u'1f628', u'envelope_with_arrow': u'1f4e9', u'stars': u'1f320', u'raised_back_of_hand': u'1f91a', u'closed_umbrella': u'1f302', u'lizard': u'1f98e', u'warning': u'26a0', u'u5408': u'1f234', u'newspaper': u'1f4f0', u'kissing': u'1f617', u'orthodox_cross': u'2626', u'bathtub': u'1f6c1', u'anchor': u'2693', u'loop': u'27bf', u'full_moon': u'1f315', u'pound': u'1f4b7', u'ping_pong': u'1f3d3', u'two_women_holding_hands': u'1f46d', u'canoe': u'1f6f6', u'key2': u'1f5dd', u'pen_ballpoint': u'1f58a', u'sushi': u'1f363', u'purse': u'1f45b', u'telephone': u'260e', u'u5272': u'1f239', u'sleeping': u'1f634', u'shamrock': u'2618', u'anger': u'1f4a2', u'dizzy': u'1f4ab', u'stuffed_flatbread': u'1f959', u'bow_and_arrow': u'1f3f9', u'arrow_forward': u'25b6', u'violin': u'1f3bb', u'name_badge': u'1f4db', u'mouse': u'1f42d', u'id': u'1f194', u'airplane_small': u'1f6e9', u'synagogue': u'1f54d', u'shirt': u'1f455', u'white_circle': u'26aa', u'balloon': u'1f388', u'heart_decoration': u'1f49f', u'joy_cat': u'1f639', u'kimono': u'1f458', u'speaker': u'1f508', u'train2': u'1f686', u'first_quarter_moon': u'1f313', u'classical_building': u'1f3db', u'left_luggage': u'1f6c5', u'meat_on_bone': u'1f356', u'point_left': u'1f448', u'hamster': u'1f439', u'satellite': u'1f4e1', u'black_heart': u'1f5a4', u'arrow_heading_up': u'2934', u'calendar_spiral': u'1f5d3', u'snail': u'1f40c', u'person_frowning': u'1f64d', u'cloud': u'2601', u'arrow_down_small': u'1f53d', u'pick': u'26cf', u'leopard': u'1f406', u'paperclips': u'1f587', u'diamond_shape_with_a_dot_inside': u'1f4a0', u'barber': u'1f488', u'christmas_tree': u'1f384', u'unicorn': u'1f984', u'cityscape': u'1f3d9', u'slot_machine': u'1f3b0', u'ice_cream': u'1f368', u'rowboat': u'1f6a3', u'euro': u'1f4b6', u'broken_heart': u'1f494', u'burrito': u'1f32f', u'smile_cat': u'1f638', u'clock12': u'1f55b', u'triangular_ruler': u'1f4d0', u'ocean': u'1f30a', u'military_medal': u'1f396', u'flags': u'1f38f', u'hearts': u'2665', u'joystick': u'1f579', u'muscle': u'1f4aa', u'love_hotel': u'1f3e9', u'hotdog': u'1f32d', u'snowman': u'26c4', u'eyeglasses': u'1f453', u'speak_no_evil': u'1f64a', u'rocket': u'1f680', u'yen': u'1f4b4', u'camel': u'1f42b', u'straight_ruler': u'1f4cf', u'u7533': u'1f238', u'dancers': u'1f46f', u'sleepy': u'1f62a', u'heart_eyes_cat': u'1f63b', u'green_apple': u'1f34f', u'shallow_pan_of_food': u'1f958', u'clock8': u'1f557', u'books': u'1f4da', u'tools': u'1f6e0', u'dromedary_camel': u'1f42a', u'couch': u'1f6cb', u'prince': u'1f934', u'apple': u'1f34e', u'flashlight': u'1f526', u'womans_hat': u'1f452', u'handshake': u'1f91d', u'sandal': u'1f461', u'white_medium_square': u'25fb', u'snowboarder': u'1f3c2', u'sunflower': u'1f33b', u'grey_exclamation': u'2755', u'thinking': u'1f914', u'rose': u'1f339', u'bell': u'1f514', u'desktop': u'1f5a5', u'cherries': u'1f352', u'tumbler_glass': u'1f943', u'innocent': u'1f607', u'rice_cracker': u'1f358', u'stopwatch': u'23f1', u'ski': u'1f3bf', u'pill': u'1f48a', u'musical_keyboard': u'1f3b9', u'skier': u'26f7', u'potable_water': u'1f6b0', u'menorah': u'1f54e', u'sneezing_face': u'1f927', u'orange_book': u'1f4d9', u'play_pause': u'23ef', u'wind_blowing_face': u'1f32c', u'couple': u'1f46b', u'face_palm': u'1f926', u'yin_yang': u'262f', u'womans_clothes': u'1f45a', u'dart': u'1f3af', u'clock1': u'1f550', u'clock2': u'1f551', u'clock3': u'1f552', u'clock4': u'1f553', u'open_hands': u'1f450', u'clock6': u'1f555', u'clock7': u'1f556', u'cloud_tornado': u'1f32a', u'clock9': u'1f558', u'clock130': u'1f55c', u'cd': u'1f4bf', u'disappointed': u'1f61e', u'grin': u'1f601', u'place_of_worship': u'1f6d0', u'upside_down': u'1f643', u'japanese_goblin': u'1f47a', u'gift': u'1f381', u'prayer_beads': u'1f4ff', u'stuck_out_tongue': u'1f61b', u'stuck_out_tongue_winking_eye': u'1f61c', u'clown': u'1f921', u'arrows_counterclockwise': u'1f504', u'bangbang': u'203c', u'dancer': u'1f483', u'laughing': u'1f606', u'city_dusk': u'1f306', u'clap': u'1f44f', u'mahjong': u'1f004', u'left_right_arrow': u'2194', u'japanese_castle': u'1f3ef', u'waning_gibbous_moon': u'1f316', u'crown': u'1f451', u'back': u'1f519', u'sparkling_heart': u'1f496', u'clubs': u'2663', u'regional_indicator_k': u'1f1f0', u'candy': u'1f36c', u'medal': u'1f3c5', u'wavy_dash': u'3030', u'person_with_pouting_face': u'1f64e', u'scales': u'2696', u'champagne_glass': u'1f942', u'arrow_right_hook': u'21aa', u'two_men_holding_hands': u'1f46c', u'tired_face': u'1f62b', u'newspaper2': u'1f5de', u'fox': u'1f98a', u'closed_lock_with_key': u'1f510', u'rhino': u'1f98f', u'anguished': u'1f627', u'tanabata_tree': u'1f38b', u'fog': u'1f32b', u'carousel_horse': u'1f3a0', u'large_orange_diamond': u'1f536', u'deciduous_tree': u'1f333', u'o2': u'1f17e', u'knife': u'1f52a', u'nose': u'1f443', u'point_up': u'261d', u'smiley': u'1f603', u'zzz': u'1f4a4', u'corn': u'1f33d', u'kissing_smiling_eyes': u'1f619', u'hatched_chick': u'1f425', u'first_place': u'1f947', u'lips': u'1f444', u'volcano': u'1f30b', u'kissing_heart': u'1f618', u'tropical_fish': u'1f420', u'bamboo': u'1f38d', u'eight_spoked_asterisk': u'2733', u'projector': u'1f4fd', u'trophy': u'1f3c6', u'on': u'1f51b', u'ok': u'1f197', u'cowboy': u'1f920', u'field_hockey': u'1f3d1', u'island': u'1f3dd', u'black_small_square': u'25aa', u'school_satchel': u'1f392', u'o': u'2b55', u'shrimp': u'1f990', u'film_frames': u'1f39e', u'chart_with_downwards_trend': u'1f4c9', u'clock10': u'1f559', u'u6e80': u'1f235', u'no_bell': u'1f515', u'smiley_cat': u'1f63a', u'water_polo': u'1f93d', u'ox': u'1f402', u'mountain_railway': u'1f69e', u'tongue': u'1f445', u'womens': u'1f6ba', u'curry': u'1f35b', u'angry': u'1f620', u'alembic': u'2697', u'baby_chick': u'1f424', u'information_source': u'2139', u'sob': u'1f62d', u'dagger': u'1f5e1', u'potato': u'1f954', u'waxing_crescent_moon': u'1f312', u'tiger2': u'1f405', u'bath': u'1f6c0', u'sos': u'1f198', u'frog': u'1f438', u'syringe': u'1f489', u'last_quarter_moon': u'1f317', u'tada': u'1f389', u'black_medium_square': u'25fc', u'custard': u'1f36e', u'unlock': u'1f513', u'compression': u'1f5dc', u'clock530': u'1f560', u'heavy_multiplication_x': u'2716', u'white_check_mark': u'2705', u'tennis': u'1f3be', u'question': u'2753', u'secret': u'3299', u'arrows_clockwise': u'1f503', u'tone5': u'1f3ff', u'tone4': u'1f3fe', u'whale': u'1f433', u'camera': u'1f4f7', u'tone1': u'1f3fb', u'tone3': u'1f3fd', u'tone2': u'1f3fc', u'wilted_rose': u'1f940', u'boom': u'1f4a5', u'boxing_glove': u'1f94a', u'cricket': u'1f3cf', u'crab': u'1f980', u'droplet': u'1f4a7', u'bus': u'1f68c', u'relaxed': u'263a', u'fireworks': u'1f386', u'urn': u'26b1', u'level_slider': u'1f39a', u'construction': u'1f6a7', u'link': u'1f517', u'fallen_leaf': u'1f342', u'skull_crossbones': u'2620', u'astonished': u'1f632', u'satellite_orbital': u'1f6f0', u'card_index': u'1f4c7', u'ear': u'1f442', u'radio_button': u'1f518', u'bug': u'1f41b', u'penguin': u'1f427', u'regional_indicator_l': u'1f1f1', u'arrow_heading_down': u'2935', u'congratulations': u'3297', u'regional_indicator_o': u'1f1f4', u'regional_indicator_h': u'1f1ed', u'regional_indicator_i': u'1f1ee', u'regional_indicator_j': u'1f1ef', u'rage': u'1f621', u'regional_indicator_d': u'1f1e9', u'control_knobs': u'1f39b', u'regional_indicator_f': u'1f1eb', u'regional_indicator_g': u'1f1ec', u'fries': u'1f35f', u'grey_question': u'2754', u'arrow_upper_left': u'2196', u'regional_indicator_c': u'1f1e8', u'strawberry': u'1f353', u'non-potable_water': u'1f6b1', u'athletic_shoe': u'1f45f', u'regional_indicator_x': u'1f1fd', u'regional_indicator_y': u'1f1fe', u'regional_indicator_z': u'1f1ff', u'star2': u'1f31f', u'regional_indicator_t': u'1f1f9', u'regional_indicator_u': u'1f1fa', u'regional_indicator_v': u'1f1fb', u'regional_indicator_w': u'1f1fc', u'regional_indicator_p': u'1f1f5', u'regional_indicator_q': u'1f1f6', u'regional_indicator_r': u'1f1f7', u'anger_right': u'1f5ef', u'arrow_double_up': u'23eb', u'toilet': u'1f6bd', u'money_mouth': u'1f911', u'ab': u'1f18e', u'fist': u'270a', u'mortar_board': u'1f393', u'cinema': u'1f3a6', u'm': u'24c2', u'triangular_flag_on_post': u'1f6a9', u'deer': u'1f98c', u'black_nib': u'2712', u'pig': u'1f437', u'floppy_disk': u'1f4be', u'signal_strength': u'1f4f6', u'gemini': u'264a', u'cartwheel': u'1f938', u'candle': u'1f56f', u'european_post_office': u'1f3e4', u'slight_smile': u'1f642', u'ship': u'1f6a2', u'shopping_cart': u'1f6d2', u'nerd': u'1f913', u'telephone_receiver': u'1f4de', u'u7981': u'1f232', u'rainbow': u'1f308', u'movie_camera': u'1f3a5', u'lemon': u'1f34b', u'arrow_double_down': u'23ec', u'peach': u'1f351', u'peace': u'262e', u'boot': u'1f462', u'ng': u'1f196', u'mountain_bicyclist': u'1f6b5', u'book': u'1f4d6', u'clock1130': u'1f566', u'oncoming_bus': u'1f68d', u'badminton': u'1f3f8', u'clock1030': u'1f565', u'regional_indicator_e': u'1f1ea', u'shrug': u'1f937', u'poop': u'1f4a9', u'man_dancing': u'1f57a', u'star': u'2b50', u'rabbit2': u'1f407', u'octagonal_sign': u'1f6d1', u'footprints': u'1f463', u'football': u'1f3c8', u'pear': u'1f350', u'taurus': u'2649', u'articulated_lorry': u'1f69b', u'airplane_arriving': u'1f6ec', u'police_car': u'1f693', u'flushed': u'1f633', u'closed_book': u'1f4d5', u'desert': u'1f3dc', u'ghost': u'1f47b', u'libra': u'264e', u'vs': u'1f19a', u'spades': u'2660', u'vibration_mode': u'1f4f3', u'cloud_lightning': u'1f329', u'dvd': u'1f4c0', u'mask': u'1f637', u'mag_right': u'1f50e', u'gorilla': u'1f98d', u'hushed': u'1f62f', u'sunrise_over_mountains': u'1f304', u'partly_sunny': u'26c5', u'heavy_dollar_sign': u'1f4b2', u'scroll': u'1f4dc'}

def query(q):
    is_shortcode = False
    if q.startswith(":"):
        is_shortcode = True
        q = q[1:]
    matches = [x for x in EMOJI.keys() if x.startswith(q.lower().replace(" ", "_"))]
    if not matches:
        print json.dumps({"results": []})
        return
    results = [
        {"name": unichr(int(EMOJI[x], 16)), "key": x, "score": 100 if is_shortcode else 100 * len(q) / len(x),
        "icon": "/usr/share/icons/gnome/scalable/apps/accessories-character-map-symbolic.svg", "description": ":%s:" % x}
        for x in matches
    ]
    print json.dumps({"results": results})


def invoke(key):
    char = unichr(int(EMOJI[key], 16)).encode("utf-8")
    p = Popen(["xclip", "-i", "-selection", "clipboard"], stdin=PIPE)
    res = p.communicate(input=char)
    p.stdin.close()
    p = Popen(["xclip", "-i", "-selection", "primary"], stdin=PIPE)
    res = p.communicate(input=char)
    p.stdin.close()

if __name__ == "__main__":
    if len(sys.argv) != 3:
        print >> sys.stderr, "Bad invocation %r" % (sys.argv,)
    elif sys.argv[1] == "--query":
        query(sys.argv[2])
    elif sys.argv[1] == "--invoke":
        invoke(sys.argv[2])
    else:
        print >> sys.stderr, "Bad command %s" % (sys.argv[1],)
